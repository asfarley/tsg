<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8" />
      <title>Training Set Generation Tutorial</title>
      <style>.markdown-preview:not([data-use-github-style]) { padding: 2em; font-size: 1.2em; color: rgb(171, 178, 191); overflow: auto; background-color: rgb(40, 44, 52); }
.markdown-preview:not([data-use-github-style]) > :first-child { margin-top: 0px; }
.markdown-preview:not([data-use-github-style]) h1, .markdown-preview:not([data-use-github-style]) h2, .markdown-preview:not([data-use-github-style]) h3, .markdown-preview:not([data-use-github-style]) h4, .markdown-preview:not([data-use-github-style]) h5, .markdown-preview:not([data-use-github-style]) h6 { line-height: 1.2; margin-top: 1.5em; margin-bottom: 0.5em; color: rgb(255, 255, 255); }
.markdown-preview:not([data-use-github-style]) h1 { font-size: 2.4em; font-weight: 300; }
.markdown-preview:not([data-use-github-style]) h2 { font-size: 1.8em; font-weight: 400; }
.markdown-preview:not([data-use-github-style]) h3 { font-size: 1.5em; font-weight: 500; }
.markdown-preview:not([data-use-github-style]) h4 { font-size: 1.2em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) h5 { font-size: 1.1em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) h6 { font-size: 1em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) strong { color: rgb(255, 255, 255); }
.markdown-preview:not([data-use-github-style]) del { color: rgb(124, 135, 156); }
.markdown-preview:not([data-use-github-style]) a, .markdown-preview:not([data-use-github-style]) a code { color: rgb(82, 139, 255); }
.markdown-preview:not([data-use-github-style]) img { max-width: 100%; }
.markdown-preview:not([data-use-github-style]) > p { margin-top: 0px; margin-bottom: 1.5em; }
.markdown-preview:not([data-use-github-style]) > ul, .markdown-preview:not([data-use-github-style]) > ol { margin-bottom: 1.5em; }
.markdown-preview:not([data-use-github-style]) blockquote { margin: 1.5em 0px; font-size: inherit; color: rgb(124, 135, 156); border-color: rgb(75, 83, 98); border-width: 4px; }
.markdown-preview:not([data-use-github-style]) hr { margin: 3em 0px; border-top: 2px dashed rgb(75, 83, 98); background: none; }
.markdown-preview:not([data-use-github-style]) table { margin: 1.5em 0px; }
.markdown-preview:not([data-use-github-style]) th { color: rgb(255, 255, 255); }
.markdown-preview:not([data-use-github-style]) th, .markdown-preview:not([data-use-github-style]) td { padding: 0.66em 1em; border: 1px solid rgb(75, 83, 98); }
.markdown-preview:not([data-use-github-style]) code { color: rgb(255, 255, 255); background-color: rgb(58, 63, 75); }
.markdown-preview:not([data-use-github-style]) pre.editor-colors { margin: 1.5em 0px; padding: 1em; font-size: 0.92em; border-radius: 3px; background-color: rgb(49, 54, 63); }
.markdown-preview:not([data-use-github-style]) kbd { color: rgb(255, 255, 255); border-width: 1px 1px 2px; border-style: solid; border-color: rgb(75, 83, 98) rgb(75, 83, 98) rgb(62, 68, 81); background-color: rgb(58, 63, 75); }
.markdown-preview[data-use-github-style] { font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif; line-height: 1.6; word-wrap: break-word; padding: 30px; font-size: 16px; color: rgb(51, 51, 51); overflow: scroll; background-color: rgb(255, 255, 255); }
.markdown-preview[data-use-github-style] > :first-child { margin-top: 0px !important; }
.markdown-preview[data-use-github-style] > :last-child { margin-bottom: 0px !important; }
.markdown-preview[data-use-github-style] a:not([href]) { color: inherit; text-decoration: none; }
.markdown-preview[data-use-github-style] .absent { color: rgb(204, 0, 0); }
.markdown-preview[data-use-github-style] .anchor { position: absolute; top: 0px; left: 0px; display: block; padding-right: 6px; padding-left: 30px; margin-left: -30px; }
.markdown-preview[data-use-github-style] .anchor:focus { outline: none; }
.markdown-preview[data-use-github-style] h1, .markdown-preview[data-use-github-style] h2, .markdown-preview[data-use-github-style] h3, .markdown-preview[data-use-github-style] h4, .markdown-preview[data-use-github-style] h5, .markdown-preview[data-use-github-style] h6 { position: relative; margin-top: 1em; margin-bottom: 16px; font-weight: bold; line-height: 1.4; }
.markdown-preview[data-use-github-style] h1 .octicon-link, .markdown-preview[data-use-github-style] h2 .octicon-link, .markdown-preview[data-use-github-style] h3 .octicon-link, .markdown-preview[data-use-github-style] h4 .octicon-link, .markdown-preview[data-use-github-style] h5 .octicon-link, .markdown-preview[data-use-github-style] h6 .octicon-link { display: none; color: rgb(0, 0, 0); vertical-align: middle; }
.markdown-preview[data-use-github-style] h1:hover .anchor, .markdown-preview[data-use-github-style] h2:hover .anchor, .markdown-preview[data-use-github-style] h3:hover .anchor, .markdown-preview[data-use-github-style] h4:hover .anchor, .markdown-preview[data-use-github-style] h5:hover .anchor, .markdown-preview[data-use-github-style] h6:hover .anchor { padding-left: 8px; margin-left: -30px; text-decoration: none; }
.markdown-preview[data-use-github-style] h1:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h2:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h3:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h4:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h5:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h6:hover .anchor .octicon-link { display: inline-block; }
.markdown-preview[data-use-github-style] h1 tt, .markdown-preview[data-use-github-style] h2 tt, .markdown-preview[data-use-github-style] h3 tt, .markdown-preview[data-use-github-style] h4 tt, .markdown-preview[data-use-github-style] h5 tt, .markdown-preview[data-use-github-style] h6 tt, .markdown-preview[data-use-github-style] h1 code, .markdown-preview[data-use-github-style] h2 code, .markdown-preview[data-use-github-style] h3 code, .markdown-preview[data-use-github-style] h4 code, .markdown-preview[data-use-github-style] h5 code, .markdown-preview[data-use-github-style] h6 code { font-size: inherit; }
.markdown-preview[data-use-github-style] h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom: 1px solid rgb(238, 238, 238); }
.markdown-preview[data-use-github-style] h1 .anchor { line-height: 1; }
.markdown-preview[data-use-github-style] h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom: 1px solid rgb(238, 238, 238); }
.markdown-preview[data-use-github-style] h2 .anchor { line-height: 1; }
.markdown-preview[data-use-github-style] h3 { font-size: 1.5em; line-height: 1.43; }
.markdown-preview[data-use-github-style] h3 .anchor { line-height: 1.2; }
.markdown-preview[data-use-github-style] h4 { font-size: 1.25em; }
.markdown-preview[data-use-github-style] h4 .anchor { line-height: 1.2; }
.markdown-preview[data-use-github-style] h5 { font-size: 1em; }
.markdown-preview[data-use-github-style] h5 .anchor { line-height: 1.1; }
.markdown-preview[data-use-github-style] h6 { font-size: 1em; color: rgb(119, 119, 119); }
.markdown-preview[data-use-github-style] h6 .anchor { line-height: 1.1; }
.markdown-preview[data-use-github-style] p, .markdown-preview[data-use-github-style] blockquote, .markdown-preview[data-use-github-style] ul, .markdown-preview[data-use-github-style] ol, .markdown-preview[data-use-github-style] dl, .markdown-preview[data-use-github-style] table, .markdown-preview[data-use-github-style] pre { margin-top: 0px; margin-bottom: 16px; }
.markdown-preview[data-use-github-style] hr { height: 4px; padding: 0px; margin: 16px 0px; border: 0px none; background-color: rgb(231, 231, 231); }
.markdown-preview[data-use-github-style] ul, .markdown-preview[data-use-github-style] ol { padding-left: 2em; }
.markdown-preview[data-use-github-style] ul.no-list, .markdown-preview[data-use-github-style] ol.no-list { padding: 0px; list-style-type: none; }
.markdown-preview[data-use-github-style] ul ul, .markdown-preview[data-use-github-style] ul ol, .markdown-preview[data-use-github-style] ol ol, .markdown-preview[data-use-github-style] ol ul { margin-top: 0px; margin-bottom: 0px; }
.markdown-preview[data-use-github-style] li > p { margin-top: 16px; }
.markdown-preview[data-use-github-style] dl { padding: 0px; }
.markdown-preview[data-use-github-style] dl dt { padding: 0px; margin-top: 16px; font-size: 1em; font-style: italic; font-weight: bold; }
.markdown-preview[data-use-github-style] dl dd { padding: 0px 16px; margin-bottom: 16px; }
.markdown-preview[data-use-github-style] blockquote { padding: 0px 15px; color: rgb(119, 119, 119); border-left: 4px solid rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] blockquote > :first-child { margin-top: 0px; }
.markdown-preview[data-use-github-style] blockquote > :last-child { margin-bottom: 0px; }
.markdown-preview[data-use-github-style] table { display: block; width: 100%; overflow: auto; word-break: keep-all; }
.markdown-preview[data-use-github-style] table th { font-weight: bold; }
.markdown-preview[data-use-github-style] table th, .markdown-preview[data-use-github-style] table td { padding: 6px 13px; border: 1px solid rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] table tr { border-top: 1px solid rgb(204, 204, 204); background-color: rgb(255, 255, 255); }
.markdown-preview[data-use-github-style] table tr:nth-child(2n) { background-color: rgb(248, 248, 248); }
.markdown-preview[data-use-github-style] img { max-width: 100%; box-sizing: border-box; }
.markdown-preview[data-use-github-style] .emoji { max-width: none; }
.markdown-preview[data-use-github-style] span.frame { display: block; overflow: hidden; }
.markdown-preview[data-use-github-style] span.frame > span { display: block; float: left; width: auto; padding: 7px; margin: 13px 0px 0px; overflow: hidden; border: 1px solid rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] span.frame span img { display: block; float: left; }
.markdown-preview[data-use-github-style] span.frame span span { display: block; padding: 5px 0px 0px; clear: both; color: rgb(51, 51, 51); }
.markdown-preview[data-use-github-style] span.align-center { display: block; overflow: hidden; clear: both; }
.markdown-preview[data-use-github-style] span.align-center > span { display: block; margin: 13px auto 0px; overflow: hidden; text-align: center; }
.markdown-preview[data-use-github-style] span.align-center span img { margin: 0px auto; text-align: center; }
.markdown-preview[data-use-github-style] span.align-right { display: block; overflow: hidden; clear: both; }
.markdown-preview[data-use-github-style] span.align-right > span { display: block; margin: 13px 0px 0px; overflow: hidden; text-align: right; }
.markdown-preview[data-use-github-style] span.align-right span img { margin: 0px; text-align: right; }
.markdown-preview[data-use-github-style] span.float-left { display: block; float: left; margin-right: 13px; overflow: hidden; }
.markdown-preview[data-use-github-style] span.float-left span { margin: 13px 0px 0px; }
.markdown-preview[data-use-github-style] span.float-right { display: block; float: right; margin-left: 13px; overflow: hidden; }
.markdown-preview[data-use-github-style] span.float-right > span { display: block; margin: 13px auto 0px; overflow: hidden; text-align: right; }
.markdown-preview[data-use-github-style] code, .markdown-preview[data-use-github-style] tt { padding: 0.2em 0px; margin: 0px; font-size: 85%; border-radius: 3px; background-color: rgba(0, 0, 0, 0.0392157); }
.markdown-preview[data-use-github-style] code::before, .markdown-preview[data-use-github-style] tt::before, .markdown-preview[data-use-github-style] code::after, .markdown-preview[data-use-github-style] tt::after { letter-spacing: -0.2em; content: "Â "; }
.markdown-preview[data-use-github-style] code br, .markdown-preview[data-use-github-style] tt br { display: none; }
.markdown-preview[data-use-github-style] del code { text-decoration: inherit; }
.markdown-preview[data-use-github-style] pre > code { padding: 0px; margin: 0px; font-size: 100%; word-break: normal; white-space: pre; border: 0px; background: transparent; }
.markdown-preview[data-use-github-style] .highlight { margin-bottom: 16px; }
.markdown-preview[data-use-github-style] .highlight pre, .markdown-preview[data-use-github-style] pre { padding: 16px; overflow: auto; font-size: 85%; line-height: 1.45; border-radius: 3px; background-color: rgb(247, 247, 247); }
.markdown-preview[data-use-github-style] .highlight pre { margin-bottom: 0px; word-break: normal; }
.markdown-preview[data-use-github-style] pre { word-wrap: normal; }
.markdown-preview[data-use-github-style] pre code, .markdown-preview[data-use-github-style] pre tt { display: inline; max-width: initial; padding: 0px; margin: 0px; overflow: initial; line-height: inherit; word-wrap: normal; border: 0px; background-color: transparent; }
.markdown-preview[data-use-github-style] pre code::before, .markdown-preview[data-use-github-style] pre tt::before, .markdown-preview[data-use-github-style] pre code::after, .markdown-preview[data-use-github-style] pre tt::after { content: normal; }
.markdown-preview[data-use-github-style] kbd { display: inline-block; padding: 3px 5px; font-size: 11px; line-height: 10px; color: rgb(85, 85, 85); vertical-align: middle; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(204, 204, 204) rgb(187, 187, 187); border-radius: 3px; box-shadow: rgb(187, 187, 187) 0px -1px 0px inset; background-color: rgb(252, 252, 252); }
.markdown-preview[data-use-github-style] a { color: rgb(51, 122, 183); }
.markdown-preview[data-use-github-style] code { color: inherit; }
.markdown-preview[data-use-github-style] pre.editor-colors { padding: 0.8em 1em; margin-bottom: 1em; font-size: 0.85em; border-radius: 4px; overflow: auto; }
.scrollbars-visible-always .markdown-preview pre.editor-colors .vertical-scrollbar, .scrollbars-visible-always .markdown-preview pre.editor-colors .horizontal-scrollbar { visibility: hidden; }
.scrollbars-visible-always .markdown-preview pre.editor-colors:hover .vertical-scrollbar, .scrollbars-visible-always .markdown-preview pre.editor-colors:hover .horizontal-scrollbar { visibility: visible; }
.markdown-preview .task-list-item-checkbox { position: absolute; margin: 0.25em 0px 0px -1.4em; }
.bracket-matcher .region {
  border-bottom: 1px dotted lime;
  position: absolute;
}

pre.editor-colors {
  background-color: #282c34;
  color: #abb2bf;
}
pre.editor-colors .line.cursor-line {
  background-color: rgba(153, 187, 255, 0.04);
}
pre.editor-colors .invisible {
  color: #abb2bf;
}
pre.editor-colors .cursor {
  border-left: 2px solid #528bff;
}
pre.editor-colors .selection .region {
  background-color: #3e4451;
}
pre.editor-colors .bracket-matcher .region {
  border-bottom: 1px solid #528bff;
  box-sizing: border-box;
}
pre.editor-colors .invisible-character {
  color: rgba(171, 178, 191, 0.15);
}
pre.editor-colors .indent-guide {
  color: rgba(171, 178, 191, 0.15);
}
pre.editor-colors .wrap-guide {
  background-color: rgba(171, 178, 191, 0.15);
}
pre.editor-colors .find-result .region.region.region,
pre.editor-colors .current-result .region.region.region {
  border-radius: 2px;
  background-color: rgba(82, 139, 255, 0.24);
  transition: border-color 0.4s;
}
pre.editor-colors .find-result .region.region.region {
  border: 2px solid transparent;
}
pre.editor-colors .current-result .region.region.region {
  border: 2px solid #528bff;
  transition-duration: .1s;
}
pre.editor-colors .gutter .line-number {
  color: #636d83;
  -webkit-font-smoothing: antialiased;
}
pre.editor-colors .gutter .line-number.cursor-line {
  color: #abb2bf;
  background-color: #2c313a;
}
pre.editor-colors .gutter .line-number.cursor-line-no-selection {
  background-color: transparent;
}
pre.editor-colors .gutter .line-number .icon-right {
  color: #abb2bf;
}
pre.editor-colors .gutter:not(.git-diff-icon) .line-number.git-line-removed.git-line-removed::before {
  bottom: -3px;
}
pre.editor-colors .gutter:not(.git-diff-icon) .line-number.git-line-removed::after {
  content: "";
  position: absolute;
  left: 0px;
  bottom: 0px;
  width: 25px;
  border-bottom: 1px dotted rgba(224, 82, 82, 0.5);
  pointer-events: none;
}
pre.editor-colors .gutter .line-number.folded,
pre.editor-colors .gutter .line-number:after,
pre.editor-colors .fold-marker:after {
  color: #abb2bf;
}
.syntax--comment {
  color: #5c6370;
  font-style: italic;
}
.syntax--comment .syntax--markup.syntax--link {
  color: #5c6370;
}
.syntax--entity.syntax--name.syntax--type {
  color: #e5c07b;
}
.syntax--entity.syntax--other.syntax--inherited-class {
  color: #98c379;
}
.syntax--keyword {
  color: #c678dd;
}
.syntax--keyword.syntax--control {
  color: #c678dd;
}
.syntax--keyword.syntax--operator {
  color: #abb2bf;
}
.syntax--keyword.syntax--other.syntax--special-method {
  color: #61afef;
}
.syntax--keyword.syntax--other.syntax--unit {
  color: #d19a66;
}
.syntax--storage {
  color: #c678dd;
}
.syntax--storage.syntax--type.syntax--annotation,
.syntax--storage.syntax--type.syntax--primitive {
  color: #c678dd;
}
.syntax--storage.syntax--modifier.syntax--package,
.syntax--storage.syntax--modifier.syntax--import {
  color: #abb2bf;
}
.syntax--constant {
  color: #d19a66;
}
.syntax--constant.syntax--variable {
  color: #d19a66;
}
.syntax--constant.syntax--character.syntax--escape {
  color: #56b6c2;
}
.syntax--constant.syntax--numeric {
  color: #d19a66;
}
.syntax--constant.syntax--other.syntax--color {
  color: #56b6c2;
}
.syntax--constant.syntax--other.syntax--symbol {
  color: #56b6c2;
}
.syntax--variable {
  color: #e06c75;
}
.syntax--variable.syntax--interpolation {
  color: #be5046;
}
.syntax--variable.syntax--parameter {
  color: #abb2bf;
}
.syntax--string {
  color: #98c379;
}
.syntax--string.syntax--regexp {
  color: #56b6c2;
}
.syntax--string.syntax--regexp .syntax--source.syntax--ruby.syntax--embedded {
  color: #e5c07b;
}
.syntax--string.syntax--other.syntax--link {
  color: #e06c75;
}
.syntax--punctuation.syntax--definition.syntax--comment {
  color: #5c6370;
}
.syntax--punctuation.syntax--definition.syntax--method-parameters,
.syntax--punctuation.syntax--definition.syntax--function-parameters,
.syntax--punctuation.syntax--definition.syntax--parameters,
.syntax--punctuation.syntax--definition.syntax--separator,
.syntax--punctuation.syntax--definition.syntax--seperator,
.syntax--punctuation.syntax--definition.syntax--array {
  color: #abb2bf;
}
.syntax--punctuation.syntax--definition.syntax--heading,
.syntax--punctuation.syntax--definition.syntax--identity {
  color: #61afef;
}
.syntax--punctuation.syntax--definition.syntax--bold {
  color: #e5c07b;
  font-weight: bold;
}
.syntax--punctuation.syntax--definition.syntax--italic {
  color: #c678dd;
  font-style: italic;
}
.syntax--punctuation.syntax--section.syntax--embedded {
  color: #be5046;
}
.syntax--punctuation.syntax--section.syntax--method,
.syntax--punctuation.syntax--section.syntax--class,
.syntax--punctuation.syntax--section.syntax--inner-class {
  color: #abb2bf;
}
.syntax--support.syntax--class {
  color: #e5c07b;
}
.syntax--support.syntax--type {
  color: #56b6c2;
}
.syntax--support.syntax--function {
  color: #56b6c2;
}
.syntax--support.syntax--function.syntax--any-method {
  color: #61afef;
}
.syntax--entity.syntax--name.syntax--function {
  color: #61afef;
}
.syntax--entity.syntax--name.syntax--class,
.syntax--entity.syntax--name.syntax--type.syntax--class {
  color: #e5c07b;
}
.syntax--entity.syntax--name.syntax--section {
  color: #61afef;
}
.syntax--entity.syntax--name.syntax--tag {
  color: #e06c75;
}
.syntax--entity.syntax--other.syntax--attribute-name {
  color: #d19a66;
}
.syntax--entity.syntax--other.syntax--attribute-name.syntax--id {
  color: #61afef;
}
.syntax--meta.syntax--class {
  color: #e5c07b;
}
.syntax--meta.syntax--class.syntax--body {
  color: #abb2bf;
}
.syntax--meta.syntax--method-call,
.syntax--meta.syntax--method {
  color: #abb2bf;
}
.syntax--meta.syntax--definition.syntax--variable {
  color: #e06c75;
}
.syntax--meta.syntax--link {
  color: #d19a66;
}
.syntax--meta.syntax--require {
  color: #61afef;
}
.syntax--meta.syntax--selector {
  color: #c678dd;
}
.syntax--meta.syntax--separator {
  background-color: #373b41;
  color: #abb2bf;
}
.syntax--meta.syntax--tag {
  color: #abb2bf;
}
.syntax--underline {
  text-decoration: underline;
}
.syntax--none {
  color: #abb2bf;
}
.syntax--invalid.syntax--deprecated {
  color: #523d14 !important;
  background-color: #e0c285 !important;
}
.syntax--invalid.syntax--illegal {
  color: white !important;
  background-color: #e05252 !important;
}
.syntax--markup.syntax--bold {
  color: #d19a66;
  font-weight: bold;
}
.syntax--markup.syntax--changed {
  color: #c678dd;
}
.syntax--markup.syntax--deleted {
  color: #e06c75;
}
.syntax--markup.syntax--italic {
  color: #c678dd;
  font-style: italic;
}
.syntax--markup.syntax--heading {
  color: #e06c75;
}
.syntax--markup.syntax--heading .syntax--punctuation.syntax--definition.syntax--heading {
  color: #61afef;
}
.syntax--markup.syntax--link {
  color: #56b6c2;
}
.syntax--markup.syntax--inserted {
  color: #98c379;
}
.syntax--markup.syntax--quote {
  color: #d19a66;
}
.syntax--markup.syntax--raw {
  color: #98c379;
}
.syntax--source.syntax--c .syntax--keyword.syntax--operator {
  color: #c678dd;
}
.syntax--source.syntax--cpp .syntax--keyword.syntax--operator {
  color: #c678dd;
}
.syntax--source.syntax--cs .syntax--keyword.syntax--operator {
  color: #c678dd;
}
.syntax--source.syntax--css .syntax--property-name,
.syntax--source.syntax--css .syntax--property-value {
  color: #828997;
}
.syntax--source.syntax--css .syntax--property-name.syntax--support,
.syntax--source.syntax--css .syntax--property-value.syntax--support {
  color: #abb2bf;
}
.syntax--source.syntax--gfm .syntax--markup {
  -webkit-font-smoothing: auto;
}
.syntax--source.syntax--gfm .syntax--link .syntax--entity {
  color: #61afef;
}
.syntax--source.syntax--go .syntax--storage.syntax--type.syntax--string {
  color: #c678dd;
}
.syntax--source.syntax--ini .syntax--keyword.syntax--other.syntax--definition.syntax--ini {
  color: #e06c75;
}
.syntax--source.syntax--java .syntax--storage.syntax--modifier.syntax--import {
  color: #e5c07b;
}
.syntax--source.syntax--java .syntax--storage.syntax--type {
  color: #e5c07b;
}
.syntax--source.syntax--java .syntax--keyword.syntax--operator.syntax--instanceof {
  color: #c678dd;
}
.syntax--source.syntax--java-properties .syntax--meta.syntax--key-pair {
  color: #e06c75;
}
.syntax--source.syntax--java-properties .syntax--meta.syntax--key-pair > .syntax--punctuation {
  color: #abb2bf;
}
.syntax--source.syntax--js .syntax--keyword.syntax--operator {
  color: #56b6c2;
}
.syntax--source.syntax--js .syntax--keyword.syntax--operator.syntax--delete,
.syntax--source.syntax--js .syntax--keyword.syntax--operator.syntax--in,
.syntax--source.syntax--js .syntax--keyword.syntax--operator.syntax--of,
.syntax--source.syntax--js .syntax--keyword.syntax--operator.syntax--instanceof,
.syntax--source.syntax--js .syntax--keyword.syntax--operator.syntax--new,
.syntax--source.syntax--js .syntax--keyword.syntax--operator.syntax--typeof,
.syntax--source.syntax--js .syntax--keyword.syntax--operator.syntax--void {
  color: #c678dd;
}
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--dictionary.syntax--json > .syntax--string.syntax--quoted.syntax--json {
  color: #e06c75;
}
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--dictionary.syntax--json > .syntax--string.syntax--quoted.syntax--json > .syntax--punctuation.syntax--string {
  color: #e06c75;
}
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--dictionary.syntax--json > .syntax--value.syntax--json > .syntax--string.syntax--quoted.syntax--json,
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--array.syntax--json > .syntax--value.syntax--json > .syntax--string.syntax--quoted.syntax--json,
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--dictionary.syntax--json > .syntax--value.syntax--json > .syntax--string.syntax--quoted.syntax--json > .syntax--punctuation,
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--array.syntax--json > .syntax--value.syntax--json > .syntax--string.syntax--quoted.syntax--json > .syntax--punctuation {
  color: #98c379;
}
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--dictionary.syntax--json > .syntax--constant.syntax--language.syntax--json,
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--array.syntax--json > .syntax--constant.syntax--language.syntax--json {
  color: #56b6c2;
}
.syntax--source.syntax--ruby .syntax--constant.syntax--other.syntax--symbol > .syntax--punctuation {
  color: inherit;
}
.syntax--source.syntax--python .syntax--keyword.syntax--operator.syntax--logical.syntax--python {
  color: #c678dd;
}
.syntax--source.syntax--python .syntax--variable.syntax--parameter {
  color: #d19a66;
}
</style>
  </head>
  <body class='markdown-preview' data-use-github-style><h1 id="multiple-object-image-segmentation-with-vtc">Multiple-Object Image Segmentation with VTC</h1>
<hr>
<h2 id="introduction">Introduction</h2>
<p>VTC traffic-counting software has trouble distinguishing between single objects and several overlapping objects. To solve this problem, a neural network is trained to identify the number of objects in an image and estimate the locations and spatial information of the identified objects.</p>
<p>Training data can be real or synthetic. Real training data for this problem is expensive, so this document describes an approach for generating synthetic training data.</p>
<p>The generated data contains both simulated video of an intersection, and associated object information logs. The purpose of training the network is to produce object information logs using only access to the video stream.</p>
<h2 id="software-prerequisites">Software Prerequisites</h2>
<p>Before proceeding, install the following packages:</p>
<ul>
<li>VTC on Windows 10</li>
<li>Unity 5.6.1f1 on Windows 10</li>
<li>VMware Player on Windows 10</li>
<li>Ubuntu 16.04 LTS 64-bit on VMWare Player</li>
<li>Theano 0.9.0 on Ubuntu 16.04 LTS</li>
</ul>
<h2 id="simulated-video">Simulated Video</h2>
<p>Synthetic video footage is generated by running a simulation written in Unity (the video game engine). The simulation includes a 4-way intersection with vehicles performing turn maneuvers from different approaches. Right now, the simulation only includes one car model and a single camera vantage point. The simulation may need significant improvement in order to generate a wide enough variety of training footage.</p>
<h4 id="how-to-generate-synthetic-video">How to generate synthetic video</h4>
<p>Synthetic video is generated by launching the Unity application <strong>TSG</strong>. In the Hierarchy window, selection ConfigurationSingleton. In the Inspector window, the Root Output Path should be configurable. Select a good value for your own development environment (ex: C:\TSG). The Output Folder configuration item is appended to the Root Output Path to determine the output location for generated frames and object position data.</p>
<h2 id="file-formats">File Formats</h2>
<h4 id="-guid-statehistory-txt">[<em>guid</em>] statehistory.txt</h4>
<p>Generated by <strong>TSG</strong> in configured output path.</p>
<p>Contains the entire list of frames in which a particular object existed along with associated object information logs. One statehistory file exists for each object passing through the simulated field of view.</p>
<p>Example line:</p>
<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>-299.8&nbsp;2.3&nbsp;264.7&nbsp;0&nbsp;-2&nbsp;0&nbsp;-1823.2&nbsp;436.3&nbsp;-9825.5&nbsp;103.8&nbsp;2460.9&nbsp;482.1&nbsp;7/30/2017&nbsp;12:17:01&nbsp;PM&nbsp;116</span></span></span></div></pre><h4 id="boundingboxinfo-txt">BoundingBoxInfo.txt</h4>
<p>Generated by <strong>VTC</strong> when configuration option Export Training Data is enabled. Foreground blobs detected using background subtraction are saved to disk along with this file for future association with ground-truth object spatial information.</p>
<p>Contains a list of subframes exported using VTC for subitizing. This file is the first-stage output from VTC; the bounding boxes indicated in this file represent naive blobs which could contain zero or more objects. This file is processed using ground-truth object position logs (statehistory.txt files) to associate &#39;query&#39; bounding boxes with &#39;response&#39; bounding-box lists.</p>
<p>Example line:</p>
<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>Filename:&quot;C:\VTCProject\vtc\bin\examples\MovingObjectSubimages\295.bmp&quot;&nbsp;X:328.3&nbsp;Y:381.5&nbsp;Width:73&nbsp;Height:39&nbsp;Frame:1201</span></span></span></div></pre><h4 id="spatialinfocontainedobjects-txt">SpatialInfoContainedObjects.txt</h4>
<p>Generated by ruby script <strong>bblookup.rb</strong> along with ground-truth files ([<em>guid</em>]statehistory.txt) and BoundingBoxInfo.txt</p>
<p><em>e.x.</em> from Windows:</p>
<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>ruby&nbsp;bblookup.rb&nbsp;E:\TSG\Test\&nbsp;C:\VTCProject\vtc\bin\examples\BoundingBoxInfo.txt&nbsp;C:\VTCProject\vtc\bin\examples\ClassifiedBoundingBoxInfo.txt</span></span></span></div></pre><p>Contains a list of subframes exported using VTC for subitizing, along with the known quantity of objects in each subframe and a list of object spatial information associated with each object contained in this subframe.</p>
<p>This file is a &#39;comprehensive&#39; metadata breakdown of an input subframe in terms of contained object quantity and spatial information. This file is targeted at human readers and downstream glue-logic parsing files used to generate the actual training set binary data.</p>
<p>Example line:</p>
<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>Filename:&quot;C:\VTCProject\vtc\bin\examples\MovingObjectSubimages\58.bmp&quot;&nbsp;X:897.0&nbsp;Y:314.6&nbsp;Width:67&nbsp;Height:39&nbsp;Frame:444&nbsp;Count:2&nbsp;&nbsp;[X:914.5&nbsp;Y:300.4&nbsp;Width:40.2&nbsp;Height:32.6]&nbsp;[X:886.0&nbsp;Y:319.7&nbsp;Width:52.6&nbsp;Height:42.6]</span></span></span></div></pre><h4 id="labels-txt">labels.txt</h4>
<p>Generated by ruby script <strong>generate_labels.rb</strong> <em>e.x.</em>:</p>
<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>ruby&nbsp;generate_labels.rb&nbsp;boundingboxes.txt&nbsp;labels.txt</span></span></span></div></pre><p>This file is the immediate precursor to dataset generation for Theano. This file contains annotated training set information (input image paths along with target one-hot output vectors). Only used for pure subitizing, does not contain spatial information.</p>
<p>Example line:</p>
<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>&quot;C:\VTCProject\vtc\bin\examples\MovingObjectSubimages\13.bmp&quot;&nbsp;0&nbsp;[1&nbsp;0&nbsp;0&nbsp;0&nbsp;0]</span></span></span></div></pre><h4 id="spatial-txt">spatial.txt</h4>
<p>Generated by: <strong>TBD</strong></p>
<p>This file is the immediate precursor to dataset generation for Theano. This file contains annotated training set information (input image paths along with target spatial information lists). Used to train a network to output spatial information in list format using an input image.</p>
<p>Example line:
<strong>TBD</strong></p>
<h2 id="neural-network-architectures">Neural Network Architectures</h2>
<p>VTC may require one or more neural-network architectures. The following variants are in development.</p>
<h3 id="subitizing">Subitizing</h3>
<p>Subitizing is the process of converting from an image or other simulus directly into a quantity response. The input is typically raw, continuous sensory data (e.g. image) and the output can be a single integer or a one-hot encoded vector.</p>
<p>Subitizing neural networks can use the same architecture as any other well-known classification architecture; The Convolutional MLP  from the Theano examples seems to work well. Any network capable of decent MNIST digit-classification performance is probably applicable to subitizing.</p>
<p><strong>Image &rArr; Quantity</strong></p>
<p><img src="https://dl.dropboxusercontent.com/u/59343634/Images/SubitizeIllustration.png" alt="Subitizing Illustration" title="Subitizing vs Bounding-Box Set Output"></p>
<h3 id="set-output">Set Output</h3>
<p>Standard neural networks output answers in the form of fixed-length vectors. This presents a problem for multiple object tracking; if we want a network to tell us the location of objects, we&#39;re asking for a variable-length list where order doesn&#39;t matter; in other words, we want our network to output a set rather than a vector. For the specific problem of identifying objects in a single image, we want the network to output a list of bounding-boxes containing objects relative to the input box coordinates.</p>
<p>The main difference in set-output neural network architectures is that the error function must be adjusted to account for the fact that a list of contained objects in an image may occur in any order without penalty. Thus, the output vector is permuted in a manner determined by the size of each element in the output list; the best match between permuted output vectors and the target output vector is selected.</p>
<p><strong>Image &rArr; [Position, Position, &hellip;]</strong></p>
<h2 id="runtime-usage">Runtime Usage</h2>
<p>In <strong>VTC</strong> in the module <strong>VTC.Classifier.cs</strong>, see the method for communication with the Theano ZeroMQ process:</p>
<pre class="editor-colors lang-csharp"><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--return-type syntax--cs"><span class="syntax--entity syntax--name syntax--class syntax--cs"><span>const</span></span></span><span>&nbsp;</span><span>string&nbsp;ClassifierEndpoint&nbsp;=&nbsp;&quot;tcp:</span><span class="syntax--comment syntax--line syntax--double-slash syntax--cs"><span>//</span><span>192.168.238.128:5555&quot;;</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span>public&nbsp;static&nbsp;int[]&nbsp;</span><span class="syntax--meta syntax--method syntax--identifier syntax--cs"><span class="syntax--entity syntax--name syntax--function syntax--declaration syntax--cs"><span>ClassifyImagesZMQ</span></span><span class="syntax--punctuation syntax--definition syntax--method-parameters syntax--begin syntax--cs"><span>(</span></span><span class="syntax--meta syntax--parameters syntax--cs"><span class="syntax--entity syntax--name syntax--generic syntax--class syntax--cs"><span>Image</span></span><span>&lt;</span><span class="syntax--meta syntax--generic syntax--type syntax--specifier syntax--cs"><span class="syntax--entity syntax--name syntax--class syntax--cs"><span>Bgr</span></span></span><span>,</span><span>&nbsp;</span><span class="syntax--meta syntax--generic syntax--type syntax--specifier syntax--cs"><span class="syntax--storage syntax--value syntax--type syntax--cs"><span>byte</span></span></span><span>&gt;</span><span>[]</span><span>&nbsp;</span><span class="syntax--variable syntax--parameter syntax--function syntax--cs"><span>images</span></span></span><span class="syntax--punctuation syntax--definition syntax--method-parameters syntax--end syntax--cs"><span>)</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--punctuation syntax--section syntax--method syntax--begin syntax--cs"><span>{</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span>&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--control syntax--cs"><span>if</span></span><span>&nbsp;(images.Length&nbsp;==&nbsp;</span><span class="syntax--constant syntax--numeric syntax--cs"><span>0</span></span><span>)</span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span>&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--block syntax--cs"><span class="syntax--punctuation syntax--section syntax--block syntax--begin syntax--cs"><span>{</span></span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--control syntax--cs"><span>return</span></span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--cs"><span>new</span></span><span>&nbsp;</span><span class="syntax--storage syntax--value syntax--type syntax--cs"><span>int</span></span><span>[</span><span class="syntax--constant syntax--numeric syntax--cs"><span>0</span></span><span>];&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;</span><span class="syntax--punctuation syntax--section syntax--block syntax--end syntax--cs"><span>}</span></span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span>&nbsp;</span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span>&nbsp;&nbsp;&nbsp;</span><span class="syntax--storage syntax--value syntax--type syntax--cs"><span>int</span></span><span>[]</span><span>&nbsp;</span><span class="syntax--entity syntax--name syntax--variables syntax--cs"><span>classes</span></span><span>&nbsp;</span><span>=&nbsp;</span><span class="syntax--keyword syntax--operator syntax--cs"><span>new</span></span><span>&nbsp;</span><span class="syntax--storage syntax--value syntax--type syntax--cs"><span>int</span></span><span>[</span><span>images.Length];</span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span>&nbsp;&nbsp;&nbsp;</span><span class="syntax--storage syntax--reference syntax--type syntax--cs"><span>string</span></span><span>[]</span><span>&nbsp;</span><span class="syntax--entity syntax--name syntax--variables syntax--cs"><span>classesLong</span></span><span>&nbsp;</span><span>=&nbsp;</span><span class="syntax--keyword syntax--operator syntax--cs"><span>new</span></span><span>&nbsp;</span><span class="syntax--storage syntax--reference syntax--type syntax--cs"><span>string</span></span><span>[</span><span>images.Length];</span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span>&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--other syntax--var syntax--cs"><span>var</span></span><span>&nbsp;</span><span class="syntax--entity syntax--name syntax--variables syntax--cs"><span>args&nbsp;</span></span><span>=&nbsp;</span><span class="syntax--keyword syntax--operator syntax--cs"><span>new</span></span><span>&nbsp;</span><span class="syntax--storage syntax--reference syntax--type syntax--cs"><span>string</span></span><span>[]</span><span>&nbsp;</span><span class="syntax--meta syntax--block syntax--cs"><span class="syntax--punctuation syntax--section syntax--block syntax--begin syntax--cs"><span>{</span></span><span>&nbsp;ClassifierEndpoint&nbsp;</span><span class="syntax--punctuation syntax--section syntax--block syntax--end syntax--cs"><span>}</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span>&nbsp;&nbsp;&nbsp;</span><span class="syntax--storage syntax--reference syntax--type syntax--cs"><span>string</span></span><span>&nbsp;</span><span class="syntax--entity syntax--name syntax--variables syntax--cs"><span>endpoint</span></span><span>&nbsp;</span><span>=&nbsp;args[</span><span class="syntax--constant syntax--numeric syntax--cs"><span>0</span></span><span>];</span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span>&nbsp;</span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span>&nbsp;&nbsp;&nbsp;</span><span class="syntax--comment syntax--line syntax--double-slash syntax--cs"><span>//</span><span>&nbsp;Create</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span>&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--operator syntax--cs"><span>using</span></span><span>&nbsp;(</span><span class="syntax--keyword syntax--other syntax--var syntax--cs"><span>var</span></span><span>&nbsp;</span><span class="syntax--entity syntax--name syntax--variables syntax--cs"><span>context&nbsp;</span></span><span>=&nbsp;</span><span class="syntax--keyword syntax--operator syntax--cs"><span>new</span></span><span>&nbsp;</span><span class="syntax--entity syntax--name syntax--class syntax--cs"><span>ZContext</span></span><span>())</span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span>&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--operator syntax--cs"><span>using</span></span><span>&nbsp;(</span><span class="syntax--keyword syntax--other syntax--var syntax--cs"><span>var</span></span><span>&nbsp;</span><span class="syntax--entity syntax--name syntax--variables syntax--cs"><span>requester&nbsp;</span></span><span>=&nbsp;</span><span class="syntax--keyword syntax--operator syntax--cs"><span>new</span></span><span>&nbsp;</span><span class="syntax--entity syntax--name syntax--class syntax--cs"><span>ZSocket</span></span><span>(context,&nbsp;ZSocketType.REQ))</span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span>&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--block syntax--cs"><span class="syntax--punctuation syntax--section syntax--block syntax--begin syntax--cs"><span>{</span></span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--comment syntax--line syntax--double-slash syntax--cs"><span>//</span><span>&nbsp;Connect</span><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;requester.</span><span class="syntax--meta syntax--method-call syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span>Connect</span></span><span class="syntax--punctuation syntax--definition syntax--method-parameters syntax--begin syntax--cs"><span>(</span></span><span>endpoint</span><span class="syntax--punctuation syntax--definition syntax--method-parameters syntax--end syntax--cs"><span>)</span></span></span><span>;</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--comment syntax--line syntax--double-slash syntax--cs"><span>//</span><span>&nbsp;Send</span><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--other syntax--var syntax--cs"><span>var</span></span><span>&nbsp;</span><span class="syntax--entity syntax--name syntax--variables syntax--cs"><span>numBytes&nbsp;</span></span><span>=&nbsp;</span><span class="syntax--constant syntax--numeric syntax--cs"><span>0</span></span><span>;</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--control syntax--cs"><span>for</span></span><span>&nbsp;(</span><span class="syntax--storage syntax--value syntax--type syntax--cs"><span>int</span></span><span>&nbsp;</span><span class="syntax--entity syntax--name syntax--variables syntax--cs"><span>k</span></span><span>&nbsp;</span><span>=&nbsp;</span><span class="syntax--constant syntax--numeric syntax--cs"><span>0</span></span><span>;&nbsp;k&nbsp;&lt;&nbsp;images.Length;&nbsp;k++)</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numBytes&nbsp;+=&nbsp;images[k].Data.Length;</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--other syntax--var syntax--cs"><span>var</span></span><span>&nbsp;</span><span class="syntax--entity syntax--name syntax--variables syntax--cs"><span>bytes&nbsp;</span></span><span>=&nbsp;</span><span class="syntax--keyword syntax--operator syntax--cs"><span>new</span></span><span>&nbsp;</span><span class="syntax--storage syntax--value syntax--type syntax--cs"><span>byte</span></span><span>[</span><span>numBytes];</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--other syntax--var syntax--cs"><span>var</span></span><span>&nbsp;</span><span class="syntax--entity syntax--name syntax--variables syntax--cs"><span>index&nbsp;</span></span><span>=&nbsp;</span><span class="syntax--constant syntax--numeric syntax--cs"><span>0</span></span><span>;</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--control syntax--cs"><span>for</span></span><span>&nbsp;(</span><span class="syntax--storage syntax--value syntax--type syntax--cs"><span>int</span></span><span>&nbsp;</span><span class="syntax--entity syntax--name syntax--variables syntax--cs"><span>k</span></span><span>&nbsp;</span><span>=&nbsp;</span><span class="syntax--constant syntax--numeric syntax--cs"><span>0</span></span><span>;&nbsp;k&nbsp;&lt;&nbsp;images.Length;&nbsp;k++)</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--control syntax--cs"><span>for</span></span><span>&nbsp;(</span><span class="syntax--storage syntax--value syntax--type syntax--cs"><span>int</span></span><span>&nbsp;</span><span class="syntax--entity syntax--name syntax--variables syntax--cs"><span>i</span></span><span>&nbsp;</span><span>=&nbsp;</span><span class="syntax--constant syntax--numeric syntax--cs"><span>0</span></span><span>;&nbsp;i&nbsp;&lt;&nbsp;images[k].Width;&nbsp;i++)</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--control syntax--cs"><span>for</span></span><span>&nbsp;(</span><span class="syntax--storage syntax--value syntax--type syntax--cs"><span>int</span></span><span>&nbsp;</span><span class="syntax--entity syntax--name syntax--variables syntax--cs"><span>j</span></span><span>&nbsp;</span><span>=&nbsp;</span><span class="syntax--constant syntax--numeric syntax--cs"><span>0</span></span><span>;&nbsp;j&nbsp;&lt;&nbsp;images[k].Height;&nbsp;j++)</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--block syntax--cs"><span class="syntax--punctuation syntax--section syntax--block syntax--begin syntax--cs"><span>{</span></span></span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bytes[index++]&nbsp;=&nbsp;images[k].Data[j,&nbsp;i,&nbsp;</span><span class="syntax--constant syntax--numeric syntax--cs"><span>0</span></span><span>];</span></span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bytes[index++]&nbsp;=&nbsp;images[k].Data[j,&nbsp;i,&nbsp;</span><span class="syntax--constant syntax--numeric syntax--cs"><span>1</span></span><span>];</span></span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bytes[index++]&nbsp;=&nbsp;images[k].Data[j,&nbsp;i,&nbsp;</span><span class="syntax--constant syntax--numeric syntax--cs"><span>2</span></span><span>];</span></span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--punctuation syntax--section syntax--block syntax--end syntax--cs"><span>}</span></span></span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;requester.</span><span class="syntax--meta syntax--method-call syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span>Send</span></span><span class="syntax--punctuation syntax--definition syntax--method-parameters syntax--begin syntax--cs"><span>(</span></span><span class="syntax--keyword syntax--operator syntax--cs"><span>new</span></span><span>&nbsp;</span><span class="syntax--entity syntax--name syntax--class syntax--cs"><span>ZFrame</span></span><span>(</span><span class="syntax--entity syntax--name syntax--class syntax--cs"><span>bytes</span></span><span>)</span><span class="syntax--punctuation syntax--definition syntax--method-parameters syntax--end syntax--cs"><span>)</span></span></span><span>;</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--comment syntax--line syntax--double-slash syntax--cs"><span>//</span><span>&nbsp;Receive</span><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--operator syntax--cs"><span>using</span></span><span>&nbsp;(</span><span class="syntax--entity syntax--name syntax--class syntax--cs"><span>ZFrame</span></span><span>&nbsp;</span><span class="syntax--entity syntax--name syntax--variables syntax--cs"><span>reply</span></span><span>&nbsp;</span><span>=&nbsp;requester.</span><span class="syntax--meta syntax--method-call syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span>ReceiveFrame</span></span><span class="syntax--punctuation syntax--definition syntax--method-parameters syntax--begin syntax--cs"><span>(</span></span><span class="syntax--punctuation syntax--definition syntax--method-parameters syntax--end syntax--cs"><span>)</span></span></span><span>)</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--block syntax--cs"><span class="syntax--punctuation syntax--section syntax--block syntax--begin syntax--cs"><span>{</span></span></span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--other syntax--var syntax--cs"><span>var</span></span><span>&nbsp;</span><span class="syntax--entity syntax--name syntax--variables syntax--cs"><span>replyString&nbsp;</span></span><span>=&nbsp;reply.</span><span class="syntax--meta syntax--method-call syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span>ReadString</span></span><span class="syntax--punctuation syntax--definition syntax--method-parameters syntax--begin syntax--cs"><span>(</span></span><span class="syntax--punctuation syntax--definition syntax--method-parameters syntax--end syntax--cs"><span>)</span></span></span><span>;</span></span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--other syntax--var syntax--cs"><span>var</span></span><span>&nbsp;</span><span class="syntax--entity syntax--name syntax--variables syntax--cs"><span>filteredString&nbsp;</span></span><span>=&nbsp;replyString.</span><span class="syntax--meta syntax--method-call syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span>Replace</span></span><span class="syntax--punctuation syntax--definition syntax--method-parameters syntax--begin syntax--cs"><span>(</span></span><span class="syntax--string syntax--quoted syntax--double syntax--cs"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--cs"><span>&quot;</span></span><span>[</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--cs"><span>&quot;</span></span></span><span class="syntax--punctuation syntax--definition syntax--separator syntax--parameter syntax--cs"><span>,</span></span><span>&nbsp;</span><span class="syntax--string syntax--quoted syntax--double syntax--cs"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--cs"><span>&quot;</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--cs"><span>&quot;</span></span></span><span class="syntax--punctuation syntax--definition syntax--method-parameters syntax--end syntax--cs"><span>)</span></span></span><span>.</span><span class="syntax--meta syntax--method-call syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span>Replace</span></span><span class="syntax--punctuation syntax--definition syntax--method-parameters syntax--begin syntax--cs"><span>(</span></span><span class="syntax--string syntax--quoted syntax--double syntax--cs"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--cs"><span>&quot;</span></span><span>]</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--cs"><span>&quot;</span></span></span><span class="syntax--punctuation syntax--definition syntax--separator syntax--parameter syntax--cs"><span>,</span></span><span>&nbsp;</span><span class="syntax--string syntax--quoted syntax--double syntax--cs"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--cs"><span>&quot;</span></span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--cs"><span>&quot;</span></span></span><span class="syntax--punctuation syntax--definition syntax--method-parameters syntax--end syntax--cs"><span>)</span></span></span><span>;</span></span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--other syntax--var syntax--cs"><span>var</span></span><span>&nbsp;</span><span class="syntax--entity syntax--name syntax--variables syntax--cs"><span>classStrings&nbsp;</span></span><span>=&nbsp;filteredString.</span><span class="syntax--meta syntax--method-call syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span>Split</span></span><span class="syntax--punctuation syntax--definition syntax--method-parameters syntax--begin syntax--cs"><span>(</span></span><span class="syntax--string syntax--quoted syntax--single syntax--cs"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--cs"><span>&#39;</span></span><span>&nbsp;</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--cs"><span>&#39;</span></span></span><span class="syntax--punctuation syntax--definition syntax--method-parameters syntax--end syntax--cs"><span>)</span></span></span><span>;</span></span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classesLong&nbsp;=&nbsp;classStrings.</span><span class="syntax--meta syntax--method-call syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span>Where</span></span><span class="syntax--punctuation syntax--definition syntax--method-parameters syntax--begin syntax--cs"><span>(</span></span><span>c&nbsp;=&gt;&nbsp;c&nbsp;!=&nbsp;</span><span class="syntax--string syntax--quoted syntax--double syntax--cs"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--cs"><span>&quot;</span></span><span>&nbsp;</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--cs"><span>&quot;</span></span></span><span class="syntax--punctuation syntax--definition syntax--method-parameters syntax--end syntax--cs"><span>)</span></span></span><span>.</span><span class="syntax--meta syntax--method-call syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span>ToArray</span></span><span class="syntax--punctuation syntax--definition syntax--method-parameters syntax--begin syntax--cs"><span>(</span></span><span class="syntax--punctuation syntax--definition syntax--method-parameters syntax--end syntax--cs"><span>)</span></span></span><span>;</span></span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--punctuation syntax--section syntax--block syntax--end syntax--cs"><span>}</span></span></span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;</span><span class="syntax--punctuation syntax--section syntax--block syntax--end syntax--cs"><span>}</span></span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span>&nbsp;</span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span>&nbsp;&nbsp;&nbsp;</span><span class="syntax--comment syntax--line syntax--double-slash syntax--cs"><span>//</span><span>Because&nbsp;Theano&nbsp;(and&nbsp;therefore&nbsp;ZeroMQ)&nbsp;returns&nbsp;a&nbsp;fixed-size&nbsp;array&nbsp;of&nbsp;classification&nbsp;responses</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span>&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--control syntax--cs"><span>for</span></span><span>&nbsp;(</span><span class="syntax--storage syntax--value syntax--type syntax--cs"><span>int</span></span><span>&nbsp;</span><span class="syntax--entity syntax--name syntax--variables syntax--cs"><span>i</span></span><span>&nbsp;</span><span>=&nbsp;</span><span class="syntax--constant syntax--numeric syntax--cs"><span>0</span></span><span>;&nbsp;i&nbsp;&lt;&nbsp;images.Length;&nbsp;i++)</span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span>&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--block syntax--cs"><span class="syntax--punctuation syntax--section syntax--block syntax--begin syntax--cs"><span>{</span></span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--control syntax--cs"><span>if</span></span><span>&nbsp;(classesLong[i]&nbsp;==&nbsp;</span><span class="syntax--string syntax--quoted syntax--double syntax--cs"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--cs"><span>&quot;</span></span><span>0</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--cs"><span>&quot;</span></span></span><span>)</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classes[i]&nbsp;=&nbsp;</span><span class="syntax--constant syntax--numeric syntax--cs"><span>0</span></span><span>;</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--control syntax--cs"><span>if</span></span><span>&nbsp;(classesLong[i]&nbsp;==&nbsp;</span><span class="syntax--string syntax--quoted syntax--double syntax--cs"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--cs"><span>&quot;</span></span><span>1</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--cs"><span>&quot;</span></span></span><span>)</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classes[i]&nbsp;=&nbsp;</span><span class="syntax--constant syntax--numeric syntax--cs"><span>1</span></span><span>;</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--control syntax--cs"><span>if</span></span><span>&nbsp;(classesLong[i]&nbsp;==&nbsp;</span><span class="syntax--string syntax--quoted syntax--double syntax--cs"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--cs"><span>&quot;</span></span><span>2</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--cs"><span>&quot;</span></span></span><span>)</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classes[i]&nbsp;=&nbsp;</span><span class="syntax--constant syntax--numeric syntax--cs"><span>2</span></span><span>;</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--control syntax--cs"><span>if</span></span><span>&nbsp;(classesLong[i]&nbsp;==&nbsp;</span><span class="syntax--string syntax--quoted syntax--double syntax--cs"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--cs"><span>&quot;</span></span><span>3</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--cs"><span>&quot;</span></span></span><span>)</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classes[i]&nbsp;=&nbsp;</span><span class="syntax--constant syntax--numeric syntax--cs"><span>3</span></span><span>;</span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span class="syntax--meta syntax--block syntax--cs"><span>&nbsp;&nbsp;&nbsp;</span><span class="syntax--punctuation syntax--section syntax--block syntax--end syntax--cs"><span>}</span></span></span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span>&nbsp;</span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span class="syntax--meta syntax--method syntax--body syntax--cs"><span>&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--control syntax--cs"><span>return</span></span><span>&nbsp;classes;</span></span></span></span></div><div class="line"><span class="syntax--source syntax--cs"><span class="syntax--meta syntax--method syntax--cs"><span>}</span></span></span></div></pre>
<p>In <strong>vtctheano</strong> in the file <strong>classify_images.py</strong>, see the basic ZeroMQ message handling loop:</p>
<pre class="editor-colors lang-python"><div class="line"><span class="syntax--source syntax--python"><span class="syntax--comment syntax--line syntax--number-sign syntax--python"><span class="syntax--punctuation syntax--definition syntax--comment syntax--python"><span>#</span></span><span>&nbsp;ZeroMQ&nbsp;Context</span><span>&nbsp;</span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>context</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--python"><span>=</span></span><span>&nbsp;</span><span class="syntax--meta syntax--function-call syntax--python"><span>zmq</span><span>.</span><span>Context</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;</span></span></div><div class="line"><span class="syntax--source syntax--python"><span class="syntax--comment syntax--line syntax--number-sign syntax--python"><span class="syntax--punctuation syntax--definition syntax--comment syntax--python"><span>#</span></span><span>&nbsp;Define&nbsp;the&nbsp;socket&nbsp;using&nbsp;the&nbsp;&quot;Context&quot;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>sock</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--python"><span>=</span></span><span>&nbsp;</span><span class="syntax--meta syntax--function-call syntax--python"><span>context</span><span>.</span><span>socket</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--meta syntax--function-call syntax--arguments syntax--python"><span>zmq</span><span>.</span><span>REP</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span class="syntax--meta syntax--function-call syntax--python"><span>sock</span><span>.</span><span>bind</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--meta syntax--function-call syntax--arguments syntax--python"><span class="syntax--string syntax--quoted syntax--double syntax--single-line syntax--python"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python"><span>&quot;</span></span><span>tcp://192.168.238.128:5555</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--python"><span>&quot;</span></span></span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;</span></span></div><div class="line"><span class="syntax--source syntax--python"><span class="syntax--comment syntax--line syntax--number-sign syntax--python"><span class="syntax--punctuation syntax--definition syntax--comment syntax--python"><span>#</span></span><span>&nbsp;Run&nbsp;a&nbsp;simple&nbsp;&quot;Echo&quot;&nbsp;server</span><span>&nbsp;</span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span class="syntax--keyword syntax--control syntax--repeat syntax--python"><span>while</span></span><span>&nbsp;</span><span class="syntax--constant syntax--language syntax--python"><span>True</span></span><span>:</span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>message</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--python"><span>=</span></span><span>&nbsp;</span><span class="syntax--meta syntax--function-call syntax--python"><span>sock</span><span>.</span><span>recv</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;</span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--other syntax--python"><span>print</span></span><span>(</span><span class="syntax--string syntax--quoted syntax--double syntax--single-line syntax--python"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python"><span>&quot;</span></span><span>Got&nbsp;</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--python"><span>&quot;</span></span></span><span>,</span><span class="syntax--meta syntax--function-call syntax--python"><span>sys</span><span>.</span><span>getsizeof</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--meta syntax--function-call syntax--arguments syntax--python"><span>message</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span><span>,&nbsp;</span><span class="syntax--string syntax--quoted syntax--double syntax--single-line syntax--python"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python"><span>&quot;</span></span><span>&nbsp;bytes</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--python"><span>&quot;</span></span></span><span>)</span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>message_bytes</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--python"><span>=</span></span><span>&nbsp;</span><span class="syntax--meta syntax--function-call syntax--python"><span class="syntax--support syntax--function syntax--builtin syntax--python"><span>bytearray</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--meta syntax--function-call syntax--arguments syntax--python"><span>message</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>nImages</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--python"><span>=</span></span><span>&nbsp;</span><span class="syntax--meta syntax--function-call syntax--python"><span>sys</span><span>.</span><span>getsizeof</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--meta syntax--function-call syntax--arguments syntax--python"><span>message_bytes</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span><span class="syntax--keyword syntax--operator syntax--arithmetic syntax--python"><span>/</span></span><span>(</span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>28</span></span><span class="syntax--keyword syntax--operator syntax--arithmetic syntax--python"><span>*</span></span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>28</span></span><span class="syntax--keyword syntax--operator syntax--arithmetic syntax--python"><span>*</span></span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>3</span></span><span>)</span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--control syntax--conditional syntax--python"><span>if</span></span><span>&nbsp;</span><span>nImages</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--comparison syntax--python"><span>&gt;</span></span><span>&nbsp;</span><span>batch_size</span><span>:</span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>nImages</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--python"><span>=</span></span><span>&nbsp;</span><span>batch_size</span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;</span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--other syntax--python"><span>print</span></span><span>(</span><span class="syntax--string syntax--quoted syntax--double syntax--single-line syntax--python"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python"><span>&quot;</span></span><span>Splitting&nbsp;into&nbsp;</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--python"><span>&quot;</span></span></span><span>,&nbsp;</span><span>nImages</span><span>,&nbsp;</span><span class="syntax--string syntax--quoted syntax--double syntax--single-line syntax--python"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python"><span>&quot;</span></span><span>&nbsp;images</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--python"><span>&quot;</span></span></span><span>)</span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;</span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>imageArrays</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--python"><span>=</span></span><span>&nbsp;</span><span class="syntax--meta syntax--structure syntax--list syntax--python"><span class="syntax--punctuation syntax--definition syntax--list syntax--begin syntax--python"><span>[</span></span><span class="syntax--punctuation syntax--definition syntax--list syntax--end syntax--python"><span>]</span></span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>byte_start_index</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--python"><span>=</span></span><span>&nbsp;</span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>0</span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>byte_end_index</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--python"><span>=</span></span><span>&nbsp;</span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>28</span></span><span class="syntax--keyword syntax--operator syntax--arithmetic syntax--python"><span>*</span></span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>28</span></span><span class="syntax--keyword syntax--operator syntax--arithmetic syntax--python"><span>*</span></span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>3</span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--control syntax--repeat syntax--python"><span>for</span></span><span>&nbsp;</span><span>imIndex</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--logical syntax--python"><span>in</span></span><span>&nbsp;</span><span class="syntax--meta syntax--function-call syntax--python"><span class="syntax--support syntax--function syntax--builtin syntax--python"><span>range</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--meta syntax--function-call syntax--arguments syntax--python"><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>0</span></span><span>,</span><span>batch_size</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span><span>:</span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--control syntax--conditional syntax--python"><span>if</span></span><span>&nbsp;</span><span>imIndex</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--comparison syntax--python"><span>&lt;</span></span><span>&nbsp;</span><span>nImages</span><span>:</span></span></div><div class="line"><span class="syntax--source syntax--python"><span class="syntax--punctuation syntax--whitespace syntax--comment syntax--leading syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="syntax--comment syntax--line syntax--number-sign syntax--python"><span class="syntax--punctuation syntax--definition syntax--comment syntax--python"><span>#</span></span><span>print(&quot;Parsing&nbsp;image&nbsp;&quot;,&nbsp;imIndex)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span class="syntax--punctuation syntax--whitespace syntax--comment syntax--leading syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="syntax--comment syntax--line syntax--number-sign syntax--python"><span class="syntax--punctuation syntax--definition syntax--comment syntax--python"><span>#</span></span><span>print(&quot;start&nbsp;byte:&nbsp;&quot;,&nbsp;byte_start_index,&nbsp;&quot;&nbsp;end&nbsp;byte:&nbsp;&quot;,&nbsp;byte_end_index)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>bytes_slice</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--python"><span>=</span></span><span>&nbsp;</span><span class="syntax--meta syntax--item-access syntax--python"><span>message_bytes</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>[</span></span><span class="syntax--meta syntax--item-access syntax--arguments syntax--python"><span>byte_start_index</span><span>:</span><span>byte_end_index</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>]</span></span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>bytes_index</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--python"><span>=</span></span><span>&nbsp;</span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>0</span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>im</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--python"><span>=</span></span><span>&nbsp;</span><span class="syntax--meta syntax--function-call syntax--python"><span>numpy</span><span>.</span><span>empty</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--meta syntax--function-call syntax--arguments syntax--python"><span class="syntax--meta syntax--structure syntax--list syntax--python"><span class="syntax--punctuation syntax--definition syntax--list syntax--begin syntax--python"><span>[</span></span><span class="syntax--meta syntax--structure syntax--list syntax--item syntax--python"><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>28</span></span></span><span class="syntax--punctuation syntax--separator syntax--list syntax--python"><span>,</span></span><span class="syntax--meta syntax--structure syntax--list syntax--item syntax--python"><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>28</span></span></span><span class="syntax--punctuation syntax--separator syntax--list syntax--python"><span>,</span></span><span class="syntax--meta syntax--structure syntax--list syntax--item syntax--python"><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>3</span></span></span><span class="syntax--punctuation syntax--definition syntax--list syntax--end syntax--python"><span>]</span></span></span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--control syntax--repeat syntax--python"><span>for</span></span><span>&nbsp;</span><span>i</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--logical syntax--python"><span>in</span></span><span>&nbsp;</span><span class="syntax--meta syntax--function-call syntax--python"><span class="syntax--support syntax--function syntax--builtin syntax--python"><span>range</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--meta syntax--function-call syntax--arguments syntax--python"><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>0</span></span><span>,</span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>28</span></span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span><span>:</span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--control syntax--repeat syntax--python"><span>for</span></span><span>&nbsp;</span><span>j</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--logical syntax--python"><span>in</span></span><span>&nbsp;</span><span class="syntax--meta syntax--function-call syntax--python"><span class="syntax--support syntax--function syntax--builtin syntax--python"><span>range</span></span><span>&nbsp;</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--meta syntax--function-call syntax--arguments syntax--python"><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>0</span></span><span>,</span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>28</span></span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span><span>:</span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--item-access syntax--python"><span>im</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>[</span></span><span class="syntax--meta syntax--item-access syntax--arguments syntax--python"><span>j</span><span>,</span><span>i</span><span>,</span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>0</span></span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>]</span></span></span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--python"><span>=</span></span><span>&nbsp;</span><span class="syntax--meta syntax--item-access syntax--python"><span>bytes_slice</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>[</span></span><span class="syntax--meta syntax--item-access syntax--arguments syntax--python"><span>bytes_index</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>]</span></span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>bytes_index</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--augmented syntax--python"><span>+=</span></span><span>&nbsp;</span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>1</span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span class="syntax--punctuation syntax--whitespace syntax--comment syntax--leading syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="syntax--comment syntax--line syntax--number-sign syntax--python"><span class="syntax--punctuation syntax--definition syntax--comment syntax--python"><span>#</span></span><span>print(&quot;bytes_index&nbsp;is&nbsp;&quot;,&nbsp;bytes_index)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--item-access syntax--python"><span>im</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>[</span></span><span class="syntax--meta syntax--item-access syntax--arguments syntax--python"><span>j</span><span>,</span><span>i</span><span>,</span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>1</span></span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>]</span></span></span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--python"><span>=</span></span><span>&nbsp;</span><span class="syntax--meta syntax--item-access syntax--python"><span>bytes_slice</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>[</span></span><span class="syntax--meta syntax--item-access syntax--arguments syntax--python"><span>bytes_index</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>]</span></span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>bytes_index</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--augmented syntax--python"><span>+=</span></span><span>&nbsp;</span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>1</span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span class="syntax--punctuation syntax--whitespace syntax--comment syntax--leading syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="syntax--comment syntax--line syntax--number-sign syntax--python"><span class="syntax--punctuation syntax--definition syntax--comment syntax--python"><span>#</span></span><span>print(&quot;bytes_index&nbsp;is&nbsp;&quot;,&nbsp;bytes_index,&nbsp;&quot;&nbsp;j:&nbsp;&quot;,&nbsp;j,&nbsp;&quot;&nbsp;i:&nbsp;&quot;,&nbsp;i)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--item-access syntax--python"><span>im</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>[</span></span><span class="syntax--meta syntax--item-access syntax--arguments syntax--python"><span>j</span><span>,</span><span>i</span><span>,</span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>2</span></span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>]</span></span></span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--python"><span>=</span></span><span>&nbsp;</span><span class="syntax--meta syntax--item-access syntax--python"><span>bytes_slice</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>[</span></span><span class="syntax--meta syntax--item-access syntax--arguments syntax--python"><span>bytes_index</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>]</span></span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>bytes_index</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--augmented syntax--python"><span>+=</span></span><span>&nbsp;</span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>1</span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span class="syntax--punctuation syntax--whitespace syntax--comment syntax--leading syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="syntax--comment syntax--line syntax--number-sign syntax--python"><span class="syntax--punctuation syntax--definition syntax--comment syntax--python"><span>#</span></span><span>print(&quot;bytes_index&nbsp;is&nbsp;&quot;,&nbsp;bytes_index)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;</span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>byte_start_index</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--augmented syntax--python"><span>+=</span></span><span>&nbsp;</span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>28</span></span><span class="syntax--keyword syntax--operator syntax--arithmetic syntax--python"><span>*</span></span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>28</span></span><span class="syntax--keyword syntax--operator syntax--arithmetic syntax--python"><span>*</span></span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>3</span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>byte_end_index</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--augmented syntax--python"><span>+=</span></span><span>&nbsp;</span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>28</span></span><span class="syntax--keyword syntax--operator syntax--arithmetic syntax--python"><span>*</span></span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>28</span></span><span class="syntax--keyword syntax--operator syntax--arithmetic syntax--python"><span>*</span></span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>3</span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>arr_f</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--python"><span>=</span></span><span>&nbsp;</span><span class="syntax--meta syntax--function-call syntax--python"><span>numpy</span><span>.</span><span>divide</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--meta syntax--function-call syntax--arguments syntax--python"><span class="syntax--meta syntax--function-call syntax--python"><span>numpy</span><span>.</span><span>asarray</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--meta syntax--function-call syntax--arguments syntax--python"><span>im</span><span>,&nbsp;</span><span class="syntax--variable syntax--parameter syntax--function syntax--python"><span>dtype</span></span><span class="syntax--keyword syntax--operator syntax--assignment syntax--python"><span>=</span></span><span class="syntax--string syntax--quoted syntax--double syntax--single-line syntax--python"><span class="syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python"><span>&quot;</span></span><span>float32</span><span class="syntax--punctuation syntax--definition syntax--string syntax--end syntax--python"><span>&quot;</span></span></span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span><span>,&nbsp;</span><span class="syntax--constant syntax--numeric syntax--float syntax--python"><span>255.0</span></span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span><span>.</span><span class="syntax--meta syntax--function-call syntax--python"><span>t</span><span>ranspose</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--meta syntax--function-call syntax--arguments syntax--python"><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>2</span></span><span>,</span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>0</span></span><span>,</span><span class="syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python"><span>1</span></span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span><span>.</span><span class="syntax--meta syntax--function-call syntax--python"><span>f</span><span>latten</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span><span>.</span><span class="syntax--meta syntax--function-call syntax--python"><span>a</span><span>stype</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--meta syntax--function-call syntax--arguments syntax--python"><span>numpy</span><span>.</span><span>float64</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--function-call syntax--python"><span>imageArrays</span><span>.</span><span>append</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--meta syntax--function-call syntax--arguments syntax--python"><span>arr_f</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;</span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>fake_validation_set_x</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--python"><span>=</span></span><span>&nbsp;</span><span class="syntax--meta syntax--function-call syntax--python"><span>numpy</span><span>.</span><span>asarray</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--meta syntax--function-call syntax--arguments syntax--python"><span class="syntax--meta syntax--structure syntax--list syntax--python"><span class="syntax--punctuation syntax--definition syntax--list syntax--begin syntax--python"><span>[</span></span><span class="syntax--meta syntax--structure syntax--list syntax--item syntax--python"><span class="syntax--meta syntax--item-access syntax--python"><span>imageArrays</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>[</span></span><span class="syntax--meta syntax--item-access syntax--arguments syntax--python"><span>i</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>]</span></span></span><span>&nbsp;</span><span class="syntax--keyword syntax--control syntax--repeat syntax--python"><span>for</span></span><span>&nbsp;</span><span>i</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--logical syntax--python"><span>in</span></span><span>&nbsp;</span><span class="syntax--meta syntax--function-call syntax--python"><span class="syntax--support syntax--function syntax--builtin syntax--python"><span>range</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--meta syntax--function-call syntax--arguments syntax--python"><span>batch_size</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span></span><span class="syntax--punctuation syntax--definition syntax--list syntax--end syntax--python"><span>]</span></span></span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>valid_set_x</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--python"><span>=</span></span><span>&nbsp;</span><span class="syntax--meta syntax--function-call syntax--python"><span>theano</span><span>.</span><span>shared</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--meta syntax--function-call syntax--arguments syntax--python"><span>fake_validation_set_x</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;</span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>output</span><span>&nbsp;</span><span class="syntax--keyword syntax--operator syntax--assignment syntax--python"><span>=</span></span><span>&nbsp;</span><span class="syntax--meta syntax--function-call syntax--python"><span>GetNetworkOutput</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--meta syntax--function-call syntax--arguments syntax--python"><span>layer3</span><span>,&nbsp;</span><span>batch_size</span><span>,&nbsp;</span><span>index</span><span>,&nbsp;</span><span>x</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--keyword syntax--other syntax--python"><span>print</span></span><span>(</span><span class="syntax--meta syntax--function-call syntax--python"><span>numpy</span><span>.</span><span>array_str</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--meta syntax--function-call syntax--arguments syntax--python"><span>output</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span><span>)</span></span></div><div class="line"><span class="syntax--source syntax--python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="syntax--meta syntax--function-call syntax--python"><span>sock</span><span>.</span><span>send</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--meta syntax--function-call syntax--arguments syntax--python"><span class="syntax--meta syntax--function-call syntax--python"><span>numpy</span><span>.</span><span>array_str</span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python"><span>(</span></span><span class="syntax--meta syntax--function-call syntax--arguments syntax--python"><span>output</span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span></span><span class="syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python"><span>)</span></span></span></span></div></pre>
<p>At runtime, VTC extracts subframes and presents them to a trained network for classification. VTC transmits fixed-length lists of images to a ZeroMQ port running in Python inside an Ubuntu VM. Python decodes the byte payloads into batches of images which are presented to a Theano neural network. The neural network&#39;s response is submitted back to VTC over ZeroMQ.</p>
<p>Once each subframe has been subitized (and each contained object&#39;s spatial information has been estimated), the naive blob measurement list can be updated into a filtered object measurement list containing fewer false postives and better seperation of overlapping objects.</p></body>
</html>
